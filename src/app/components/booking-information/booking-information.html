<!-- booking-information.component.html -->
<div class="host">
  <header class="flex-center">

    <app-logo/>
  </header>

  <div class="container">
    <!-- Progress Steps -->
    <div class="booking-pages flex-center gap-5 mt-4">
      <div class="page1 flex-center page">
        @if (isStepCompleted(1)) {
        <i class="bi bi-check-circle-fill text-center" [ngStyle]="{'color': '#1ABC9C', 'font-size':'2.6rem'}"></i>
        } @else {
        <span>1</span>
        }
      </div>

      <div class="page1 flex-center page">
        @if (isStepCompleted(2)) {
        <i class="bi bi-check-circle-fill text-center" [ngStyle]="{'color': '#1ABC9C', 'font-size':'2.6rem'}"></i>
        } @else {
        <span>2</span>
        }
      </div>

      <div class="page1 flex-center page">
        @if (isSuccessStep) {
        <i class="bi bi-check-circle-fill text-center" [ngStyle]="{'color': '#1ABC9C', 'font-size':'2.6rem'}"></i>
        } @else {
        <span>3</span>
        }
      </div>
    </div>

    <main class="mt-4">
      <!-- Dynamic Title Based on Current Step -->
      <div class="main-title flex-center flex-column">
        @if (isPaymentStep) {
        <h2 class="fw-semibold text-center" [ngStyle]="{'color': 'var(--p-color)'}">
          Payment
        </h2>
        <p class="small" [ngStyle]="{'color': 'var(--mute-color)'}">Kindly follow the instructions below</p>
        } @else if (isSuccessStep) {
        <h2 class="fw-semibold text-center" [ngStyle]="{'color': 'var(--p-color)'}">
          Yay! Payment Completed
        </h2>
        } @else {
        <h2 class="fw-semibold text-center" [ngStyle]="{'color': 'var(--p-color)'}">
          Booking Information
        </h2>
        <p class="small" [ngStyle]="{'color': 'var(--mute-color)'}">Please fill up the blank fields below</p>
        }
      </div>

      <!-- Conditional Component Rendering -->
      @if (isBookingStep) {
      <app-booking-form
        [isLoading]="isLoading()"
        (formSubmit)="onBookingSubmit($event)"
        (cancelBooking)="onCancel()">
      </app-booking-form>
      }

      @if (isPaymentStep && bookingDetails) {
      <app-payment-form
        [bookingDetails]="bookingDetails"
        [isLoading]="isLoading()"
        (paymentSubmit)="onPaymentSubmit($event)"
        (cancelPayment)="onCancel()">
      </app-payment-form>
      }

      @if (isSuccessStep) {
      <app-success-page
        (goToDashboard)="onGoToDashboard()">
      </app-success-page>
      }
    </main>
  </div>
</div>

<!-- Loading Spinner -->
<ngx-spinner bdColor="rgba(255, 255, 255,.5)" size="medium" color="#152C5B" type="square-jelly-box" [fullScreen]="true">
  <p>Loading...</p>
</ngx-spinner>
